(this.webpackJsonpusecontext=this.webpackJsonpusecontext||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(18),s=n.n(r),o=n(4),i=n(11),l=n(5),u=n(13),d=n(6),j=n.n(d),b=n(12),m="https://ronald-app-mern.herokuapp.com/api",h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(m,"/").concat(e);return"GET"===n?fetch(c):fetch(c,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(m,"/").concat(e),a=localStorage.getItem("token")||"";return"GET"===n?fetch(c,{method:n,headers:{"x-token":a}}):fetch(c,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(t)})},O="[task] Logout task clean",f="[task] Add new",x="[task] task updated",g="[task] task deleted",v="[task] tasks loaded",k="[auth] checking finish login state",y="[auth] login",w="[auth] Logout",N="[modal] Show modal",C="[modal] Hide modal",S=function(){return{type:C}},F=function(e){return{type:f,payload:e}},A=function(e){return{type:x,payload:e}},E=function(e){return{type:g,payload:{id:e}}},R=function(e){return{type:v,payload:e}},_=function(){return function(e){localStorage.clear(),e(D()),e({type:O})}},T=function(){return{type:k}},q=function(e){return{type:y,payload:e}},D=function(){return{type:w}},L=n(21),I=n(2),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(u.a)(t,2),a=n[0],r=n[1],s=function(){r(e)},o=function(e){var t=e.target;r(Object(I.a)(Object(I.a)({},a),{},Object(L.a)({},t.name,t.value)))};return[a,o,s]},B=n(0),G=function(){var e=P({email:"ronald@deleon.com",password:"clave01"}),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(o.b)(),r=n.email,s=n.password;return Object(B.jsxs)("div",{className:"login",children:[Object(B.jsx)("img",{src:"/assets/img/logo.png",alt:"Logo"}),Object(B.jsx)("h1",{children:"Login"}),Object(B.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(c){var a,r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h("auth",{email:e,password:t},"POST");case 2:return a=n.sent,n.next=5,a.json();case 5:(r=n.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),c(q({uid:r.uid,name:r.name}))):console.log(r);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r,s))},className:"formLogin",children:[Object(B.jsx)("label",{htmlFor:"email",children:"Email"}),Object(B.jsx)("input",{type:"email",name:"email",autoComplete:"off",onChange:c,value:r}),Object(B.jsx)("label",{htmlFor:"email",children:"Password"}),Object(B.jsx)("input",{type:"password",name:"password",autoComplete:"off",onChange:c,value:s}),Object(B.jsx)("button",{children:"Login"}),Object(B.jsxs)("p",{className:"btn-register",children:["or ",Object(B.jsx)(i.b,{to:"register",children:"Create an account"})]})]})]})},J=n(22),H=function(e){var t=e.isAuthenticated,n=e.component,c=Object(J.a)(e,["isAuthenticated","component"]);return Object(B.jsx)(l.b,Object(I.a)(Object(I.a)({},c),{},{component:function(e){return t?Object(B.jsx)(l.a,{to:"/"}):Object(B.jsx)(n,Object(I.a)({},e))}}))},M=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer})).name;return Object(B.jsxs)("nav",{className:"menu",children:[Object(B.jsx)(i.b,{to:"/login",onClick:function(){e(_())},children:" \u25c5 Logout"}),"\ud83d\udc64 ",t]})},U=function(e){var t=e.isAuthenticated,n=e.component,c=Object(J.a)(e,["isAuthenticated","component"]);return localStorage.setItem("lastPath",c.location.pathname),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(M,{}),Object(B.jsx)(l.b,Object(I.a)(Object(I.a)({},c),{},{component:function(e){return t?Object(B.jsx)(n,Object(I.a)({},e)):Object(B.jsx)(l.a,{to:"/login"})}}))]})},X=function(){var e=Object(o.b)();return Object(B.jsxs)("header",{children:[Object(B.jsx)("h1",{children:"To Do"}),Object(B.jsx)("button",{className:"btn-add",onClick:function(){e({type:N})},children:"Add"})]})},V=["#FF6633","#FF33FF","#FFFF99","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC"],W=["clock","home","work","warning"],z=function(){var e=P(),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(null),s=Object(c.useRef)(null),i=Object(o.b)(),l=Object(o.c)((function(e){return e.authReducer})).uid,d=function(e){var t=e.target;Array.from(document.querySelectorAll(".color")).map((function(e){return e.style.border="none"})),t.style.border="3px solid lightgrey"},m=function(e){var t=e.target;t.style.border?t.removeAttribute("style"):t.style.border="3px solid lightgrey"};return Object(B.jsx)("div",{className:"modal",children:Object(B.jsx)("div",{className:"modal-body",children:Object(B.jsxs)("form",{id:"form-task",onSubmit:function(e){e.preventDefault();var t,c,a=(t=s.current,Array.from(t.querySelectorAll("img")).filter((function(e){return""!==e.style.border})).map((function(e){return e.getAttribute("icono")})).toString()),o=function(e){var t;return null===(t=Array.from(e.children).filter((function(e){return"none"!==e.style.border&&""!==e.style.border}))[0])||void 0===t?void 0:t.style.background}(r.current)||"#1f999a",u=Object(I.a)(Object(I.a)({},n),{},{etiquetas:a,color:o,completed:!1,user:l});i((c=u,function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,s,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().authReducer,r=a.uid,s=a.name,t(S()),e.prev=2,e.next=5,p("tasks",c,"POST");case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).ok&&(c._id=i.task._id,c.user={_id:r,name:s},t(F(c))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()))},children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h2",{className:"modal-title",children:"Add task"}),Object(B.jsx)("div",{className:"colors",ref:r,children:V.map((function(e){return Object(B.jsx)("div",{onClick:d,className:"color",style:{background:e}},e)}))})]}),Object(B.jsx)("input",{type:"hidden",name:"color",onChange:a}),Object(B.jsx)("input",{type:"hidden",name:"etiquetas",onChange:a}),Object(B.jsx)("input",{type:"text",placeholder:"Write title",name:"title",onChange:a,required:!0}),Object(B.jsx)("input",{type:"date",name:"date",required:!0,onChange:a}),Object(B.jsx)("input",{type:"time",name:"time",required:!0,onChange:a}),Object(B.jsx)("textarea",{name:"description",id:"",cols:"30",rows:"5",placeholder:"Description",onChange:a,required:!0}),Object(B.jsxs)("div",{className:"select-etiquetas",ref:s,children:[Object(B.jsx)("h3",{className:"title-eti",children:"Hashtag "}),W.map((function(e){return Object(B.jsx)("div",{className:"eti",children:Object(B.jsx)("img",{icono:e,src:"assets/img/".concat(e,".png"),onClick:m,alt:""})},e)}))]}),Object(B.jsxs)("div",{className:"modal-btns",children:[Object(B.jsx)("button",{onClick:function(){return i(S())},type:"button",className:"btn-cancel",children:"Cancel"}),Object(B.jsx)("button",{className:"btn-save",children:"Save"})]})]})})})},K=function(e){var t=e.task,n=t._id,a=t.color,r=t.etiquetas,s=t.title,i=t.description,l=t.date,u=t.time,d=t.completed,m=e.task,h=Object(o.b)(),O=Object(c.useRef)(null),f=Object(c.useRef)(null);return Object(B.jsxs)("div",{ref:O,className:"task",style:{background:a},children:[Object(B.jsxs)("div",{className:"header",children:[Object(B.jsxs)("span",{className:"date",children:[l," - ",u]}),Object(B.jsxs)("label",{className:"switch",children:[Object(B.jsx)("input",{type:"checkbox",checked:d,onChange:function(){h(function(e,t){return t.current.querySelector(".loading").style.display="inherit",function(){var n=Object(b.a)(j.a.mark((function n(c){var a,r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p("tasks/".concat(e._id),e,"PUT");case 3:return a=n.sent,n.next=6,a.json();case 6:(r=n.sent).ok?(c(A(e)),t.current.querySelector(".loading").style.display="none"):console.log(r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(Object(I.a)(Object(I.a)({},m),{},{completed:!d}),O))}}),Object(B.jsx)("span",{className:"slider round"})]})]}),Object(B.jsxs)("div",{className:"body",children:[Object(B.jsx)("h3",{className:"title",children:s}),Object(B.jsx)("p",{className:"descripcion",children:i})]}),Object(B.jsxs)("div",{className:"footer",children:[Object(B.jsx)("div",{className:"etiquetas",children:r.split(",").map((function(e){return Object(B.jsx)("div",{className:"etiqueta",children:Object(B.jsx)("img",{className:"icon-delete",src:"assets/img/".concat(e,".png"),alt:""})},e)}))}),Object(B.jsx)("button",{className:"btn-delete",onClick:function(){var e;f.current.style.display="inherit",h((e=n,function(){var t=Object(b.a)(j.a.mark((function t(n){var c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("tasks/".concat(e),{},"DELETE");case 3:return c=t.sent,t.next=6,c.json();case 6:(a=t.sent).ok?n(E(e)):console.log(a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()))},children:Object(B.jsx)("img",{className:"icon-delete",src:"assets/img/delete.png",alt:""})})]}),Object(B.jsx)("div",{ref:f,className:"loading",children:"Espere..."})]})},Q=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.taskReducer})),n=t.tasks,a=t.checking;return Object(c.useEffect)((function(){e(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("tasks");case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.tasksList,t(R(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(B.jsx)("section",{className:"container",children:Object(B.jsxs)("div",{className:"list",children:[n[0]?n.map((function(e){return Object(B.jsx)(K,{task:e},e._id)})):Object(B.jsx)("p",{className:"msj-empty",children:"Add a task  \ud83d\udcdd"}),a&&Object(B.jsx)("p",{children:"Loading tasks..."})]})})},Y=function(e){var t=Object(o.c)((function(e){return e.modalReducer})).visible;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("section",{children:[Object(B.jsx)(X,{}),Object(B.jsx)(Q,{})]}),t&&Object(B.jsx)(z,{})]})},Z=function(){var e=P({name:"",email:"",password:"",password2:""}),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(o.b)(),r=n.name,s=n.email,l=n.password,d=n.password2;return Object(B.jsxs)("div",{className:"register",children:[Object(B.jsx)("img",{src:"/assets/img/logo.png",alt:"Logo"}),Object(B.jsx)("h1",{children:"Register"}),Object(B.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l===d&&a(function(e,t,n){return function(){var c=Object(b.a)(j.a.mark((function c(a){var r,s;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,h("auth/new",{name:n,email:e,password:t},"POST");case 2:return r=c.sent,c.next=5,r.json();case 5:(s=c.sent).ok?(localStorage.setItem("token",s.token),localStorage.setItem("token-init-date",(new Date).getTime()),a(q({uid:s.uid,name:s.name}))):console.log(s);case 7:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(s,l,r))},className:"formRegister",children:[Object(B.jsx)("label",{htmlFor:"email",children:"Full name"}),Object(B.jsx)("input",{type:"text",name:"name",autoComplete:"off",onChange:c}),Object(B.jsx)("label",{htmlFor:"email",children:"Email"}),Object(B.jsx)("input",{type:"email",name:"email",autoComplete:"off",onChange:c}),Object(B.jsx)("label",{htmlFor:"email",children:"Password"}),Object(B.jsx)("input",{type:"password",name:"password",autoComplete:"off",onChange:c,value:l}),Object(B.jsx)("label",{htmlFor:"email",children:"Password"}),Object(B.jsx)("input",{type:"password",name:"password2",autoComplete:"off",onChange:c,value:d}),l!==d&&Object(B.jsx)("p",{className:"alert",children:"Passwords do not match"}),Object(B.jsx)("button",{type:"submit",children:"Save"}),Object(B.jsx)("p",{className:"cancel",children:Object(B.jsx)(i.b,{to:"login",children:"Cancel"})})]})]})},$=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer})),n=t.checking,a=t.uid;return Object(c.useEffect)((function(){e(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(q({uid:c.uid,name:c.name}))):t(T());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(B.jsx)("h5",{children:" Espere..."}):Object(B.jsx)(i.a,{children:Object(B.jsx)("div",{children:Object(B.jsxs)(l.d,{children:[Object(B.jsx)(H,{exact:!0,path:"/login",component:G,isAuthenticated:!!a}),Object(B.jsx)(H,{exact:!0,path:"/register",component:Z,isAuthenticated:!!a}),Object(B.jsx)(U,{exact:!0,path:"/",component:Y,isAuthenticated:!!a}),Object(B.jsx)(l.a,{to:"/login"})]})})})},ee=(n(40),n(15)),te=n(28),ne={checking:!0},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(I.a)(Object(I.a)({},e),{},{checking:!1},t.payload);case k:return Object(I.a)(Object(I.a)({},e),{},{checking:!1});case w:return{checking:!1};default:return e}},ae=n(27),re={checking:!0,tasks:[]},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(I.a)(Object(I.a)({},e),{},{tasks:[t.payload].concat(Object(ae.a)(e.tasks))});case x:return Object(I.a)(Object(I.a)({},e),{},{tasks:e.tasks.map((function(e){return e._id===t.payload._id?t.payload:e}))});case g:return Object(I.a)(Object(I.a)({},e),{},{tasks:e.tasks.filter((function(e){return e._id!==t.payload.id}))});case v:return Object(I.a)(Object(I.a)({},e),{},{tasks:Object(ae.a)(t.payload),checking:!1});case O:return re;default:return e}},oe={visible:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{visible:!0};case C:return{visible:!1};default:return e}},le=Object(ee.b)({authReducer:ce,taskReducer:se,modalReducer:ie}),ue="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.c,de=Object(ee.d)(le,ue(Object(ee.a)(te.a))),je=function(){return Object(B.jsx)(o.a,{store:de,children:Object(B.jsx)($,{})})};s.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(je,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.5b78abd3.chunk.js.map